*mado-scratch-buffer.nvim*    The fastest way to open scratch buffers for Neovim

Author: aiya000
License: MIT license

==============================================================================
CONTENTS                *mado-scratch-buffer-contents*

INTRODUCTION            |mado-scratch-buffer-introduction|
SETUP                   |mado-scratch-buffer-setup|
USAGE                   |mado-scratch-buffer-usage|
INTERFACE               |mado-scratch-buffer-interface|
  CONFIGURATION         |mado-scratch-buffer-configuration|
  COMMANDS              |mado-scratch-buffer-commands|
  FUNCTIONS             |mado-scratch-buffer-functions|
CHANGELOG               |mado-scratch-buffer-changelog|


==============================================================================
INTRODUCTION            *mado-scratch-buffer-introduction*

** No more hassle with file paths! **
The fastest way to open an instant scratch buffer for Neovim.

This is a modern Lua-based implementation for Neovim, rewritten from the
original Vim script version.

Supercharge with vim-quickrun!
Combine it with vim-quickrun (https://github.com/thinca/vim-quickrun) to
execute code instantly!
>
  " Open a TypeScript buffer
  :MadoScratchBufferOpen ts

  " Write TypeScript code
  " ...

  " ...and run it immediately!
  :QuickRun
<
Please see the |mado-scratch-buffer-usage| section for usage details.

Repository:
https://github.com/aiya000/nvim-mado-scratch-buffer


==============================================================================
SETUP                   *mado-scratch-buffer-setup*

Install the plugin using your favorite plugin manager:

Using lazy.nvim: >lua
  {
    'aiya000/nvim-mado-scratch-buffer',
    config = function()
      require('mado-scratch-buffer').setup({
        -- your configuration here
      })
    end
  }
<

Using packer.nvim: >lua
  use {
    'aiya000/nvim-mado-scratch-buffer',
    config = function()
      require('mado-scratch-buffer').setup({
        -- your configuration here
      })
    end
  }
<

This plugin will work with default settings without any configuration.

Meaning:
  - The config (opts) property is optional
  - You can skip it if you want to use default settings
  - Or you want to configure your configuration,
    - See |mado-scratch-buffer-configuration|


==============================================================================
USAGE                   *mado-scratch-buffer-usage*

Open a scratch buffer with or without a file extension:
>
  " Open a new scratch buffer without file extension and filetype
  :MadoScratchBufferOpen

  " Open a new scratch buffer with markdown filetype
  :MadoScratchBufferOpen md

  " Open a new scratch buffer with TypeScript filetype
  :MadoScratchBufferOpen ts

  " Open a persistent file buffer (auto-saved)
  :MadoScratchBufferOpenFile js

  " Open next scratch buffer (force new buffer creation)
  :MadoScratchBufferOpenNext py

  " Open with custom split method and size
  :MadoScratchBufferOpen md sp 10
  :MadoScratchBufferOpen ts vsp 80
  :MadoScratchBufferOpen hs float-fixed 80x40

  " Clean up all scratch buffers and files
  :MadoScratchBufferClean
<

You can specify:
1. File extension (optional): md, ts, js, py, etc. or `--no-file-ext`
2. Open method (optional):
   - sp (horizontal split)
   - vsp (vertical split)
   - tabnew (new tab)
   - float-fixed (floating window with fixed size)
   - float-aspect (floating window with aspect ratio)
3. Buffer size (optional):
   - For sp: number for height
   - For vsp: number for width
   - For float-fixed: WIDTHxHEIGHT (e.g., 80x40)
   - For float-aspect: not supported via command (use configuration)
   - For tabnew: not applicable


==============================================================================
INTERFACE               *mado-scratch-buffer-interface*

------------------------------------------------------------------------------
CONFIGURATION           *mado-scratch-buffer-configuration*

Configure the plugin by calling the setup function:
>lua
  require('mado-scratch-buffer').setup({
    -- File patterns for temporary and persistent buffers
    file_pattern = {
      when_tmp_buffer = '/tmp/mado-scratch-tmp-%d',
      when_file_buffer = '/tmp/mado-scratch-file-%d',
    },

    -- Options when you didn't specify to the commands
    default_file_ext = 'md',                                -- Default file extension
    default_open_method = { method = 'sp', height = 15 },   -- Default open method and size

    -- Behavior options
    auto_save_file_buffer = true,      -- Auto-save file buffers on TextChanged
    use_default_keymappings = false,   -- Enable default keymaps

    -- Auto-hide settings (like scratch.vim)
    auto_hide_buffer = {
      when_tmp_buffer = false,         -- Auto-hide temporary buffers
      when_file_buffer = false,        -- Auto-hide persistent buffers
    },
  })
<

The above setup properties are the default value of each configuration option.

NOTE:
See below file to see what types the each options have :
  - `../lua/mado-scratch-buffer/init.lua`
    - and `mado_scratch_buffer.Options` type


                        *option.mado_scratch_buffer_file_pattern*
file_pattern ~
  Default: >lua
  {
    when_tmp_buffer = '/tmp/mado-scratch-tmp-%d',
    when_file_buffer = '/tmp/mado-scratch-file-%d',
  }
<
  File path patterns for temporary and persistent buffers. The `%d` will be
  replaced with an incremental number.

                        *option.mado_scratch_buffer_default_file_ext*
default_file_ext ~
  Default: `'md'`
  Default file extension when no extension is specified.

                        *option.mado_scratch_buffer_default_open_method*
default_open_method ~
  Default: `{ method = 'sp', height = 15 }`
  Default method to open buffers with size configuration.

  Examples:
  - `{ method = 'sp', height = 15 }` - horizontal split with height
  - `{ method = 'vsp', width = 30 }` - vertical split with width
  - `{ method = 'float-fixed', size = { width = 80, height = 24 } }` - floating window with fixed size (requires nui.nvim)
  - `{ method = 'float-aspect', scale = { width = 0.8, height = 0.8 } }` - floating window with aspect ratio (requires nui.nvim)
  - `{ method = 'tabnew' }` - new tab (no size needed)

  Note: `{ method = 'float', ... }` is supported for backward compatibility
  and is treated as `float-fixed`.

                        *option.mado_scratch_buffer_auto_save_file_buffer*
auto_save_file_buffer ~
  Default: `true`
  Automatically save file buffers when text changes.

                        *option.mado_scratch_buffer_use_default_keymappings*
use_default_keymappings ~
  Default: `false`
  Enable default keymappings. When enabled:
  - `<leader>b` → `:MadoScratchBufferOpen`
  - `<leader>B` → `:MadoScratchBufferOpenFile`
  - `<leader><leader>b` → `:MadoScratchBufferOpen ` (interactive)
  - `<leader><leader>B` → `:MadoScratchBufferOpenFile ` (interactive)

                        *option.mado_scratch_buffer_auto_hide_buffer*
auto_hide_buffer ~
  Default: >lua
    {
      when_tmp_buffer = false,
      when_file_buffer = false,
    }
  <
  If true, auto-hide buffers when leaving the window, like scratch.vim.

------------------------------------------------------------------------------
COMMANDS                *mado-scratch-buffer-commands*

                        *:MadoScratchBufferOpen*
:MadoScratchBufferOpen [file_ext] [open_method] [buffer_size]
  Open a temporary scratch buffer.

  Parameters:
  - file_ext: File extension (e.g., 'md', 'ts') or '--no-file-ext'
  - open_method: 'sp', 'vsp', 'tabnew', 'float-fixed', or 'float-aspect'
  - buffer_size: Number for height/width, or WIDTHxHEIGHT for float-fixed

  Examples: >
    :MadoScratchBufferOpen
    :MadoScratchBufferOpen md
    :MadoScratchBufferOpen ts sp 10
    :MadoScratchBufferOpen hs vsp 80
    :MadoScratchBufferOpen py float-fixed 80x40
    :MadoScratchBufferOpen lua float-aspect 0.9x0.8
<
                        *:MadoScratchBufferOpenFile*
:MadoScratchBufferOpenFile [file_ext] [open_method] [buffer_size]
  Open a persistent file buffer (auto-saved).
  Same parameters as |:MadoScratchBufferOpen|.

                        *:MadoScratchBufferOpenNext*
:MadoScratchBufferOpenNext [file_ext] [open_method] [buffer_size]
  Force open a new temporary scratch buffer.
  Same parameters as |:MadoScratchBufferOpen|.

                        *:MadoScratchBufferOpenFileNext*
:MadoScratchBufferOpenFileNext [file_ext] [open_method] [buffer_size]
  Force open a new persistent file buffer.
  Same parameters as |:MadoScratchBufferOpen|.

                        *:MadoScratchBufferClean*
:MadoScratchBufferClean
  Clean up all scratch buffers and files.


------------------------------------------------------------------------------
FUNCTIONS               *mado-scratch-buffer-functions*

These functions are available through the Lua API:

                        *mado-scratch-buffer.setup()*
require('mado-scratch-buffer').setup({config})
  Setup the plugin with the given configuration.

                        *mado-scratch-buffer.get_config()*
require('mado-scratch-buffer').get_config()
  Get the current configuration.

require('mado-scratch-buffer.buffer').open(opening_next, ...)
  Open a temporary scratch buffer.

require('mado-scratch-buffer.buffer').open_file(opening_next, ...)
  Open a persistent file buffer.

require('mado-scratch-buffer.buffer').clean()
  Clean up all scratch buffers and files.


==============================================================================
CHANGELOG                    *mado-scratch-buffer-changelog*

- See https://github.com/aiya000/nvim-mado-scratch-buffer/commits/main
  - We use Conventional Commits for the changelog
  - In Conventional Commits, a bang (!) indicates breaking changes
    - Please update your config if you encounter these commits
    - Example: `change!: Change argument types of 'create_foo()' in 'mado-scratch-buffer.foo' module`

- - -

2025~
- Create the new repository: https://github.com/aiya000/vim-scratch-buffer

2024
- Create original repository: https://github.com/aiya000/vim-scratch-buffer

vim:tw=78:ts=2:ft=help:norl:expandtab:
