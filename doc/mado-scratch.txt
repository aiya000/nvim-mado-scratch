*mado-scratch.nvim*    The fastest way to open scratch buffers for Neovim

Author: aiya000
License: MIT license

==============================================================================
CONTENTS                *mado-scratch-contents*

INTRODUCTION            |mado-scratch-introduction|
SETUP                   |mado-scratch-setup|
USAGE                   |mado-scratch-usage|
INTERFACE               |mado-scratch-interface|
  CONFIGURATION         |mado-scratch-configuration|
  COMMANDS              |mado-scratch-commands|
  FUNCTIONS             |mado-scratch-functions|
CHANGELOG               |mado-scratch-changelog|


==============================================================================
INTRODUCTION            *mado-scratch-introduction*

** No more hassle with file paths! **
The fastest way to open an instant scratch buffer for Neovim.

This is a modern Lua-based implementation for Neovim, rewritten from the
original Vim script version.

Supercharge with vim-quickrun!
Combine it with vim-quickrun (https://github.com/thinca/vim-quickrun) to
execute code instantly!
>
  " Open a TypeScript buffer
  :MadoScratchOpen ts

  " Write TypeScript code
  " ...

  " ...and run it immediately!
  :QuickRun
<
Please see the |mado-scratch-usage| section for usage details.

Repository:
https://github.com/aiya000/nvim-mado-scratch


==============================================================================
SETUP                   *mado-scratch-setup*

Install the plugin using your favorite plugin manager:

Using lazy.nvim: >lua
  {
    'aiya000/nvim-mado-scratch',
    config = function()
      require('mado-scratch').setup({
        -- your configuration here
      })
    end
  }
<

Using packer.nvim: >lua
  use {
    'aiya000/nvim-mado-scratch',
    config = function()
      require('mado-scratch').setup({
        -- your configuration here
      })
    end
  }
<

This plugin will work with default settings without any configuration.

Meaning:
  - The config (opts) property is optional
  - You can skip it if you want to use default settings
  - Or you want to configure your configuration,
    - See |mado-scratch-configuration|


==============================================================================
USAGE                   *mado-scratch-usage*

Open a scratch buffer with or without a file extension:
>
  " Open a new scratch buffer without file extension and filetype
  :MadoScratchOpen

  " Open a new scratch buffer with markdown filetype
  :MadoScratchOpen md

  " Open a new scratch buffer with TypeScript filetype
  :MadoScratchOpen ts

  " Open a persistent file buffer (auto-saved)
  :MadoScratchOpenFile js

  " Open next scratch buffer (force new buffer creation)
  :MadoScratchOpenNext py

  " Open with custom split method and size
  :MadoScratchOpen md sp 10
  :MadoScratchOpen ts vsp 80

  " Clean up all scratch buffers and files
  :MadoScratchClean
<

You can specify:
1. File extension (optional): md, ts, js, py, etc. or `--no-file-ext`
2. Open method (optional): sp (horizontal split) or vsp (vertical split)
3. Buffer size (optional): number for height (sp) or width (vsp)


==============================================================================
INTERFACE               *mado-scratch-interface*

------------------------------------------------------------------------------
CONFIGURATION           *mado-scratch-configuration*

Configure the plugin by calling the setup function:
>lua
  require('mado-scratch').setup({
    -- File patterns for temporary and persistent buffers
    file_pattern = {
      when_tmp_buffer = '/tmp/mado-scratch-tmp-%d',
      when_file_buffer = '/tmp/mado-scratch-file-%d',
    },

    -- Options when you didn't specify to the commands
    default_file_ext = 'md',           -- Default file extension
    default_open_method = 'sp',        -- 'sp' or 'vsp'
    default_buffer_size = 30,          -- Default buffer height/width

    -- Behavior options
    auto_save_file_buffer = true,      -- Auto-save file buffers on TextChanged
    use_default_keymappings = false,   -- Enable default keymaps

    -- Auto-hide settings (like scratch.vim)
    auto_hide_buffer = {
      when_tmp_buffer = false,         -- Auto-hide temporary buffers
      when_file_buffer = false,        -- Auto-hide persistent buffers
    },
  })
<

The above setup properties are the default value of each configuration option.

NOTE:
See below file to see what types the each options have :
  - `../lua/mado-scratch/init.lua`
    - and `mado_scratch.Options` type


                        *option.mado_scratch_file_pattern*
file_pattern ~
  Default: >lua
  {
    when_tmp_buffer = '/tmp/mado-scratch-tmp-%d',
    when_file_buffer = '/tmp/mado-scratch-file-%d',
  }
<
  File path patterns for temporary and persistent buffers. The `%d` will be
  replaced with an incremental number.

                        *option.mado_scratch_default_file_ext*
default_file_ext ~
  Default: `'md'`
  Default file extension when no extension is specified.

                        *option.mado_scratch_default_open_method*
default_open_method ~
  Default: `'sp'`
  Default method to open buffers.
  e.g., 'sp', 'vsp', and etc.

                        *option.mado_scratch_default_buffer_size*
default_buffer_size ~
  Default: `30`
  Default buffer size (height for sp, width for vsp).
  Set to `'no-auto-resize'` to disable auto resizing.

                        *option.mado_scratch_auto_save_file_buffer*
auto_save_file_buffer ~
  Default: `true`
  Automatically save file buffers when text changes.

                        *option.mado_scratch_use_default_keymappings*
use_default_keymappings ~
  Default: `false`
  Enable default keymappings. When enabled:
  - `<leader>b` → `:MadoScratchOpen`
  - `<leader>B` → `:MadoScratchOpenFile`
  - `<leader><leader>b` → `:MadoScratchOpen ` (interactive)
  - `<leader><leader>B` → `:MadoScratchOpenFile ` (interactive)

                        *option.mado_scratch_auto_hide_buffer*
auto_hide_buffer ~
  Default: >lua
    {
      when_tmp_buffer = false,
      when_file_buffer = false,
    }
  <
  If true, auto-hide buffers when leaving the window, like scratch.vim.

------------------------------------------------------------------------------
COMMANDS                *mado-scratch-commands*

                        *:MadoScratchOpen*
:MadoScratchOpen [file_ext] [open_method] [buffer_size]
  Open a temporary scratch buffer.

  Parameters:
  - file_ext: File extension (e.g., 'md', 'ts') or '--no-file-ext'
  - open_method: 'sp' or 'vsp'
  - buffer_size: Number for height/width

  Examples: >
    :MadoScratchOpen
    :MadoScratchOpen md
    :MadoScratchOpen ts sp 10
    :MadoScratchOpen js vsp 80
<

                        *:MadoScratchOpenFile*
:MadoScratchOpenFile [file_ext] [open_method] [buffer_size]
  Open a persistent file buffer (auto-saved).
  Same parameters as |:MadoScratchOpen|.

                        *:MadoScratchOpenNext*
:MadoScratchOpenNext [file_ext] [open_method] [buffer_size]
  Force open a new temporary scratch buffer.
  Same parameters as |:MadoScratchOpen|.

                        *:MadoScratchOpenFileNext*
:MadoScratchOpenFileNext [file_ext] [open_method] [buffer_size]
  Force open a new persistent file buffer.
  Same parameters as |:MadoScratchOpen|.

                        *:MadoScratchClean*
:MadoScratchClean
  Clean up all scratch buffers and files.


------------------------------------------------------------------------------
FUNCTIONS               *mado-scratch-functions*

These functions are available through the Lua API:

                        *mado-scratch.setup()*
require('mado-scratch').setup({config})
  Setup the plugin with the given configuration.

                        *mado-scratch.get_config()*
require('mado-scratch').get_config()
  Get the current configuration.

require('mado-scratch.buffer').open(opening_next, ...)
  Open a temporary scratch buffer.

require('mado-scratch.buffer').open_file(opening_next, ...)
  Open a persistent file buffer.

require('mado-scratch.buffer').clean()
  Clean up all scratch buffers and files.


==============================================================================
CHANGELOG                    *mado-scratch-changelog*

2025
- Complete rewrite in Lua for Neovim
    - The new repository:
    https://github.com/aiya000/nvim-mado-scratch
- Renamed from vim-scratch-buffer to mado-scratch.nvim
- Modern Neovim plugin structure with setup() function
- Removed backward compatibility with old Vim script version
- Updated command names to Mado* prefix
- Improved configuration system
- Added comprehensive Lua API documentation

2024
- Create original repository: https://github.com/aiya000/vim-scratch-buffer

vim:tw=78:ts=2:ft=help:norl:expandtab:
